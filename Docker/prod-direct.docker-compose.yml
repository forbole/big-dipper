version: "3"
services:
  explorer:
    hostname: explorer
    build:
      context: ..
      dockerfile: ./Docker/standalone/Dockerfile
    environment:
      MONGO_URL: "mongodb://root:example@mongo:27017/explorer?authSource=admin"
      ROOT_URL: "http://example.com"
      MAIL_URL: "smtp://user:password@mailhost:port/"
      METEOR_SETTINGS: '{"public":{"chainName":"UNDTestnet","chainId":"UND-Mainchain-TestNet","gtm":"{AddyourGoogleTagManagerIDhere}","slashingWindow":10000,"uptimeWindow":250,"initialPageSize":30,"bech32PrefixAccAddr":"und","bech32PrefixAccPub":"undpub","bech32PrefixValAddr":"undvaloper","bech32PrefixValPub":"undvaloperpub","bech32PrefixConsAddr":"undvalcons","bech32PrefixConsPub":"undvalconspub","stakingDenom":"UND","stakingDenomPlural":null,"mintingDenom":"nund","stakingFraction":1000000000,"powerReduction":null,"gasPrice":0.02,"coingeckoId":"unification"},"genesisFile":"https://raw.githubusercontent.com/unification-com/mainchain-cosmos/master/Docker/assets/node1/config/genesis.json","remote":{"rpc":"http://3.136.43.0:26660","lcd":"http://localhost:1317"},"debug":{"startTimer":true,"readGenesis":true},"params":{"startHeight":0,"defaultBlockTime":5000,"blockInterval":15000,"consensusInterval":1000,"statusInterval":7500,"signingInfoInterval":1800000,"proposalInterval":5000,"missedBlocksInterval":60000,"delegationInterval":900000}}'
    container_name: explorer
    command: /bin/sh /src/bundle/sleep_wrapper.sh

  mongo:
    hostname: mongo
    container_name: mongo
    image: mongo:4.0.2
    restart: always
    environment:
      MONGO_INITDB_DATABASE: explorer
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: example
    ports:
      - 27017:27017
